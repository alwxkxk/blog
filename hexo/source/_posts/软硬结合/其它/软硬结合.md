---
title: 软硬结合
toc: true
abbrlink: 44755
date: 2018-08-25 15:23:26
tags: 
- IOT
---

&emsp;在大学里不同专业有着不同的 __“最高境界”__ ，机械类与强电类专业学生追求的是 __“机电合一”__ ，弱电类专业学生追求的是 __“软硬结合”__ 。我作为华南某农业大学的弱电类学生，追求软硬结合，既懂点硬件，也懂点软件，一个人能解决一个产品整个研发过程，所有创意想法基本都能靠自己去实现。在这里，以物联网项目为主方向分享web开发教程，适合硬件开发人员学习的web开发教程。

# 整个物联网项目简介
&emsp;现在，我想做一个完整的物联网项目，首先要搞清所有环节。当年我毕业设计（2017年毕业）的项目示意图：
![物联网项目](http://ww1.sinaimg.cn/large/e7533e94gy1fum0jfrmfaj21ha0b142h.jpg)
&emsp;一个物联网项目如图所示，从左到右分别是用于采集数据的硬件传感器，硬件主控芯片、用于传输数据的通信模块、用于存诸数据与提供访问请求的 __服务器__ 、用于将数据展示出来并提供操作的可视化界面（就是HTML客户端，即浏览器上的网页显示，后面简称 __界面__ ）。
&emsp;服务器这概念多说一下，因为后面会反复用到，在大一大二我们做的纯硬件项目大约是这样的：硬件采集完数据，传输到LCD显示屏直接显示出来，这并没有所谓的服务器这一说。而平时手机打开网页，所显示的图片文件都是数据，所有数据都存放在一台电脑里。这台电脑不仅存放了这些数据，而且能够在你请求获取这些数据时把数据传输给你（提供服务）。这台电脑就是存放在数据中心机房里的服务器，持续稳定地24小时不间断地运行，为用户提供服务。由专门的运维人员进行管理维护，这些云服务器可以在阿里云、腾讯云等云服务器厂商租用（当然你也可以自己买一台真实的服务器扔在自己家里玩）。
&emsp;但写教程的过程中发现，用当年我毕设的方案来讲解，难度比较高。硬件方面STM32有一定门槛的，一般大学生到了大三能用它做一两个项目都被称为大神了（top5,电子科大等学校除外）。硬件与服务器通信协议上，我选择了websocket协议（当年机智云很火，我模仿了它），而整个ESP8266开发存在极高的难度（就是它浪费了我很多时间）。主要难度在这两点，经过研究探索，硬件改用nodemcu（十几块钱就能淘宝到），并使用Arduino IDE进行开发降低硬件门槛。通信协议上使用TCP协议。具体可看[demo1](/posts/64786/)
![demo1示例](http://ww1.sinaimg.cn/large/005BIQVbgy1fwstl5y6srj30il0950tp.jpg)

# 写教程的目的
- 为了炫耀我当年本科多牛逼，毕业设计多有水平，你们睁大眼睛看看。（其实这毕设难度不高，论深度不过是硬件基础加web开发基础，但一个人全套做下来，学习量以及工作量是极大的，毕竟这能拆成两个质量一般的毕业设计，一个用来参加电子类专业的毕设审评，另一个用来参加计算机类专业的毕设审评。）
- 为了把踩过的坑挑出来，指引出一条正确的道路，节约技术选型与走弯路的时间精力，给出例子保证只要愿意投时间跟着做，就一定能做出来的明确结果。（当年真的是苦，每天8小时+，还不知道自己能不能成功实现目标的情况下，各种技术选型时的尝试，搞了接近四个月，那是一种咬着牙长跑的痛苦感，能逼出眼泪的无奈，这也是为什么我愿意花大量时间写这教程的原因，不忍心让想实现软硬结合的各位再吃这种苦了。）
- 这种教程如果我不写，大概率没人写了，毕竟这属于费力不赚钱的事。

# 技术选型
&emsp;我们再看看怎么开发，仍然从左向右地看，硬件部分自己买模块自己画PCB板自己焊接各种折腾。通信模块一般就是购买WIFI模块、以太网模块、NB-IOT模块等等。相信左边大家都懂，大家都搞过硬件就不多说了，右边的软件部分就想不通了。数据经过通信模块是怎么传输到服务器里呢？又是怎么从服务器获取数据展现出来？可视化用户界面客户端怎么开发？用户点击客户端怎么才能操作硬件？  
&emsp;当年我就是怀着这堆疑问边学边做，痛苦地走了不少弯路才搞清这些方向路线问题。我在这里直接解答，好让大家有个方向。首先，每台云服务器都有自己的地址（IP地址），硬件通信以及软件客户端向这个IP地址进行通信，就能传输数据。
&emsp;以手机打开网页为例，手机输入http://www.qq.com ，经过DNS服务器会将这个网址转换成IP地址（比如说119.29.107.47）,然后你手机浏览器（手机浏览器就是客户端）就会跟这个IP地址的云服务器进行通信，此时你手机请求云服务器网页数据。这台云服务器是24小时持续运行地，当你手机请求数据时，它就把数据返回给你手机，手机获得数据后，就把数据展现出来了。 __暂时不懂没关系__
![手机浏览器打开网页原理](http://ww1.sinaimg.cn/large/e7533e94gy1fum24mjt59j20gi08edfz.jpg)
&emsp;可以看到，要想折腾物联网，必须要学习计算机网络，TCP/IP协议基础这些知识，只有搞明白才能更好地开发。__网络基础知识要先学习，物联网物联网，先要懂网。__
&emsp;现在到界面，有很多种：PC端桌面应用（VB、C++、C# 结合图形库进行开发）、平板与手机（安卓系统的用JAVA，苹果系统object-c、Swift）、浏览器网页（HTML、CSS、Javascript）。

## 到底要学什么
&emsp;首先，__网络基础__ 知识必须要学。其次到客户端与服务器开发就选择语言的问题了。当年我查遍所有语言并进行对比之后得出结论：__JavaScript__ 。
&emsp;因为实现全栈（web开发专用语，网页被称为前端，服务器应用称为后端，前后端都会开发的被称为全栈）的最低学习成本的语言是 __JavaScript__，一门语言JavaScript搞定网页，PC端软件，后台服务器，手机APP的开发。不用学PHP，不用学C#，不用学JAVA。人的精力是有限的，切换语言是需要精力的，JavaScript虽然在各场景不是最好的语言，但是对于一个人负责全部来说却是 __所需最低精力的！__

场景|本教程所用语言|其它语言|备注
---|---|---|---
网页制作|HTML、CSS、__JavaScript__|无|
PC端桌面应用|HTML、CSS、__JavaScript__ + Electron|C# 或 C++ 加图形库|
安卓Android|HTML、CSS、__JavaScript__ + cordova|JAVA加图形库|
苹果IOS|HTML、CSS、__JavaScript__ + cordova|Swift|
微信小程序|WXML、WXSS、__JavaScript__|无|WXML、WXSS与HTML、CSS类似|
后端服务器|Nodejs|PHP 或 Java等等|Nodejs的语法仍是 __JavaScript__

---
&emsp;界面开发上，__大前端统一江湖就大势所趋__ 。原本只用于网页开发的 __HTML、CSS、Javascript__ 三件套实在是开发速度快，成品多，容易做出很炫的界面，已经从网页走向了全平台，不管是windows、Mac的桌面应用，还是安卓苹果APP，微信小程序等等都是用这三件套。

&emsp;由于你想一个人完成两个人的事，所以要学习的内容相对较多，现在列出所学习的表格：

方向|上手|入门|进阶
---|---|---|---
网络|计算机网络基础|IP协议基础<br>TCP协议基础<br>HTTP协议基础|<br>MQTT协议基础
客户端开发|HTML、CSS、JS基础<br>|JQuery基础<br>chrome调试技巧|可视化图表库Echart<br>Electron基础<br>微信小程序基础
服务器开发|linux基础<br>nodejs基础|nginx基础<br>mongodb基础|docker基础<br>
硬件|nodemcu基础| |

&emsp;内容比较多，而且全是 __各种基础__ 。因为一天只有24小时，你不可能同时成为网络专家、客户端开发专家、服务器开发专家、硬件开发专家，这是不可能的。学习的路线比较长，最忌漫无目的地学习，会导致学习效率低下，容易走太多弯路浪费宝贵的时间，所以记住一点 __遇到问题解决不了，才带着问题去学习相关的内容。__ 为了解决问题而学习，而不是先学习后解决问题，因为你很有可能会发现学习的东西并不一定在日后解决问题时会用到，导致浪费时间精力。例如，你深入研究学习了如何搞高并发，如何写多线程，超牛逼的技术，后来你发现这些牛逼的技术对于这个项目来说，一点用都没有，因为这些技术只有到了用户量大了的情况下才会出现的问题，而你极有可能会遇不到。

# 下一节
- [demo1](/posts/64786/)







