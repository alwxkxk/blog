---
title: 最后的讨论
toc: true
abbrlink: 41995
date: 2018-11-05 19:15:11
tags:
---

&emsp;__本文的讨论观点会受限于本人的认知能力，毕竟我也只是个萌新。__

## demo2之后
&emsp;demo1演示了最简的物联网系统，demo2扩展了数据库、实时显示数据、数据可视化等功能，读者学习完后就已经拥有自行搭建物联网系统的能力，至少能做出一个毕业设计级别的作品。在此之后，就是商用项目级别的作品，无非就是添加用户登陆，权限管理，以及跟具体业务相关的业务逻辑代码等等，这里我不再花费精力做例子去演示，毕竟所有关键技术都已演示完毕。
&emsp;商用项目级别的作品的实现上，除了业务逻辑代码，还特别需要考虑稳定性问题。在demo2数据库相关代码里，我写入了一个TTL（time to live）索引，限定了数据只能保存一段时间，过了时间就会自动删除数据。为什么要这样做？因为时间一长，所积累的数据不断上升，直到磁盘空间用尽，导致服务器挂掉，整个系统停止工作，此时客户无法正常使用，客户就会怒气冲冲向你投诉。为了保证稳定性，需要考虑各方各面，这里简单列个表给大家一个直观的感受：


问题|解决办法
---|---
服务器被黑客入侵，带走数据库数据以此勒索| 【A】定时备份数据库数据，保证数据库数据能随时还原。（定时备份是需要付出代价的，根据场景选择不同的时间间隔，数据不太重要可每周备份，每天备份，像金融行业是随时热备。）
服务器数据被傻逼运维或自己打错命令误删| 同【A】
日志数据或业务数据积累过多，导致磁盘空间用尽，系统停止工作| 1.设置合理的自动删除数据的方式，或转移数据到其它地方另保存。<br> 2.使用监控系统，设置告警线，达到告警线时发短信通知负责人处理。<br>3.扩容。
服务器因某些原因挂掉| 【B】1.使用第三方监控系统，当监控到服务异常时马上发送短信通知负责人，由负责人第一时间修复。（比如腾讯云的云拨测 定时调用API保证服务仍处于正常工作状态。）<br>2.设置备用服务器，当发生异常时自动切换到备用服务器继续工作。
服务器被DoS攻击| 根据情况作DoS防御处理。
接入设备过多，服务器处理不过来导致的异常| 先分析瓶颈在哪，是CPU占用过高，还是内存不足，还是带宽不足等。找到原因后再做对应处理、优化、扩容等。
数据库因某些原因无法正常工作| 同【B】
服务应用出现异常，停止运行| 使用部署工具自动重启（比如PM2）
硬件设备异常，无法连接到服务器正常运行| 1.服务器发现设备断开连接，发出告警信息进行提醒。<br>2.重启并查看硬件日志分析异常原因。<br>3.使用调试工具检测是否为网络问题。<br>4.替换硬件，检查是否为物理故障。
设备异常导致不断发送大量消息至MQTT网关，导致服务器卡顿| MQTT网关限制消息的频率。
硬件流量用完，无法继续使用网络连接服务器| 作好流量监控，设置告警通知。
传输的数据被抓取利用| 通信加密。

&emsp;从上面表格看到，有很多原因导致服务异常，所以需要有各种方案去预防，并且需要有人负责运维服务器才能保证项目稳定运行。从demo来看，把软硬件打通并不是什么难事，但要想做到商用级别的系统，稳定起来就需要有一定的经验。
&emsp;商用级别的物联网系统，某公司智能快递柜开发一套系统，某工厂监控开发一套系统，某机房监控开发一套系统，不同行业各自拥有自己一套系统，不同业务不同的客户需求写不同的业务逻辑代码。那么有些人就在想，能不能建立一个物联网平台，在物联网平台上能够快速开发出各行各业的性能强劲且稳定的物联网系统。在我观点里，信息化建设的过程就如果城市化建设一样，有些包工头带着几个人团队建两三层高的小房子，有些工程师开公司带几个施工队建十几高的高楼，有些大工程师在大集团里带几个大团队建设七八十层高的大厦。几个人小外包团队能开发一套小系统，十几个人的公司能开发一套大系统，几十上百人的大公司可开发一套物联网系统。
&emsp;__屠龙术虽强，但龙只有一条。杀鸡刀虽弱，但遍地是鸡。__ 大有大的优势，小有小的活法。

## 物联网平台
&emsp;还没写完~




---


<!-- ## 大势
&emsp;社会发展方向是朝着解放生产力的方向，直白来讲就是用更少的人力完成更多的事。在市场竞争中，低效率的事物终究会被高效率的事物所取代。衡量信息化的成果可以转化为节省多少个劳动力来计算，一个套安防设备取代几个保安，一套无人超市设备取代几个收银员，一个套自动化生产线取代几百个工人，一套自动驾驶系统取代成千上万的司机。生产力将会极大地提高，被取代职业的人们会从事其它行业以及衍生出来的新行业。不断下降的硬件成本以及5G时代的来临，信息化将会迎来新一波发展，万物互联，解放生产力。如果没有核战争的话，可以料想下一波大量商机爆发就是会跟随5G时代的脚步而来。
<img alt="千万亿市场" data-src="http://ww1.sinaimg.cn/large/005BIQVbgy1fwzrid9etlj308b04pdfv.jpg" style="width:500px;height:300px;">
&emsp;人民群众的眼睛是闪亮的，一堆创业公司以“物联网”为主攻方向，毕竟是千万亿市场，幻想着占领先机就能成为新富。直至2018年年底，几百家物联网创业公司估计都死得差不多了，剩下的都是靠着信仰继续爬行。
&emsp;首先由小米的物联网设备统治2C市场，剩下2B市场中的大型项目主要由工作狂魔华为实力拿下，剩下的小型项目由各种关系户拿单找各路外包团队完成。当年几百家所谓的物联网创业公司打不过小米拼不过华为，剩下的小型项目要么没关系拿不到政府的单子，要么跟各路外包团队互拼导致利润不足，自然也就过得一般般。

## 三个阶段
1. 野蛮发展
- 各大创业公司以低利润甚至倒贴的形式抢下单子，开发出一堆低质量的物联网项目（表现为不稳定、维护成本高、不注重安全）。
- 各路物联网云平台惨淡经营，不温不火。（车联网项目除外，跟人命相关的项目肯定是不惜成本，必须以最高质量水平来完成的）

2. 黑暗时光：
- 5G时代已过去几年，各大不注重安全的物联网项目开始被各路脚本小子黑掉，最终爆发出全国大范围设备被黑，成为标志性事件。客户开始被迫重视安全问题。
- 大量物联网创业公司因为高昂维护费用导致利润低下，依旧惨淡经营。
- 各路物联网云平台，没钱的慢慢排队倒下。

3. 最终结局
- 重视安全的物联网云平台一旦成功扛过黑暗时光，客户开始重视安全问题，同时物联网设备量爆涨，有更多的理由使用物联网云平台时，开始慢慢向好。（我觉得阿里云这种大佬，有钱有技术大概率是最后的赢家。）
- 物联网公司可能会出现新业务，承接以前旧的物联网项目进行升级改造，并继续维护。

&emsp;以上观点全靠瞎吹，没有任何数据。对于物联网公司来说，就像各路信息化施工队，一个接一个的外包做下来，小富没问题，__想爆富是不太可能的，赚的都是辛苦汗水钱__。对于个人来说，重点关注 __吞噬一切界面开发的大前端__ 与 __能搞事情 的渗透入浸技术__。

## 物联网项目的特点
![物联网项目](http://ww1.sinaimg.cn/large/e7533e94gy1fum0jfrmfaj21ha0b142h.jpg)
&emsp;物联网项目特点:
- 环节多，至少要两个团队（web开发、硬件开发）
- 如果不考虑安全问题，其实技术门槛很低（难就难在如何打造出一个高稳定性，低维护成本的物联网项目）
- 稳定性低，调试难度大（毕竟环节过多，出了问题需要定位问题，有时还需要联调），进而带来维护成本高的问题
- 大多需要定制化业务开发，各行业实现信息化时拥有不同的业务逻辑（比如智能快递柜跟无人超市，这两套业务差太远了）


## 关于物联网云平台
### 梦想
&emsp;我们的目标是：能让硬件公司轻松上云，能让不懂web开发的硬件工程师轻松打造出一款物联网产品。__只要三步，让纯硬件产品转变成物联网产品。__
![老板跟客户想要的产品](http://ww1.sinaimg.cn/large/005BIQVbgy1fwyn0o75x6j30nm0h23zw.jpg)
### 实际
&emsp;产品经理与程序员所要面临的问题就多了：硬件上云要考虑的问题很多，不懂web开发的人即使借用平台也难以打造出物联网产品。
![物联网平台不好搞](http://ww1.sinaimg.cn/large/005BIQVbgy1fxa55c25z9j30he0c40u5.jpg)

### 现在仍存在的问题
1. 物联网平台最主要围绕服务器这一块，降低运维成本，提供安全保证，并解决海量设备接入海量数据存诸，然而95%项目不会一开始就是海量设备。高性能高安全性在好多项目里并不是刚需,用这个点来做宣传并没有什么用，还不如围绕 __低维护成本__ 来进行宣传。
2. 为了让硬件工程师也能做出界面来，所以就设计出一套组件让他们拖拉组成一个界面，以及绑定数据，然而依旧太丑了，更无法让他们做出更多个性化的修改。拖拉组界面功能弱到约等于无。这问题基本无解，多少年来多少家公司做相关的事情，想让拖拉组件就能做成网页，基本都死得差不多了。根本原因在于高个性化与高封装这两者是不可兼得的，界面开发本身需要很高的个性化开发，而降低难度降低工作量而作的封装就意味着降低个性化开发能力。 __如同打游戏，想变强却又不想投入时间与金钱一样。__ 怎么解决？两者不可兼得就让两者都走极端。一方面高度封装出几个好看的界面，直接让硬件工程师去绑定数据显示得了。要想个性化开发？推荐几个优秀的开发团队进行开发，具体费用自已去谈。
3. 不支持私有化部署，很多项目其实是需要私有化部署的，重视安全的机构还不允许访问外网，所以如果使用物联网云平台开发的产品，基本做不了这类项目。怎么解决？__以license的形式允许私有化部署。__ 
4. 物联网平台不能提供业务逻辑，真正的项目还是需要找web开发者进行业务开发。__其实相对于给硬件开发者进行引导培养，还不如引导软件开发者与硬件开发者相互合作的机会。__ -->





## 其它有趣的物联网项目
- [开源家庭助手 home-assistant](https://www.home-assistant.io/) [home-assistant国内中文论坛](https://bbs.hassbian.com)
开源智能家居平台，能接入一切智能设备。
- [Node-RED](https://nodered.org/)
Node-RED 是构建物联网(IOT， Internet of Things)应用程序的一个强大工具，其重点是简化代码块的“连接”以执行任务。它使用可视化编程方法，允许开发人员将预定义的代码块（称为“节点”，Node）连接起来执行任务。 是构建物联网(IOT， Internet of Things)应用程序的一个强大工具，其重点是简化代码块的“连接”以执行任务。它使用可视化编程方法，允许开发人员将预定义的代码块（称为“节点”，Node）连接起来执行任务。
